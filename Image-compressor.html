<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online Image Compressor tool to optimize images and reduce image size without losing quality. Compress JPEG, PNG, and WebP formats for web performance and SEO image optimization.">
    <meta name="keywords" content="Image Compressor, Optimize Image Online, Reduce Image Size Free, Compress Image Without Losing Quality, Free Image Compression Tool, Image Optimization for Web, JPEG Compressor Online, PNG Compressor Free, Fast Image Compressor, SEO Image Optimization, Compress Images for Website, Online Image Size Reducer, Best Image Compression Tool, Image Compressor for Bloggers, Reduce Photo Size Online, Web Performance Image Optimizer, High-Quality Image Compressor, Batch Image Compression, Free Photo Compressor, Image Compression for WordPress, Optimize Images for Google, Smaller Image File Size, Image Compressor App, Professional Image Optimization, Compress Images for Social Media">
    <meta name="Raj" content="ImageCompressPro">
    <meta property="og:title" content="ImageCompressPro - Free Online Image Compression Tool">
    <meta property="og:description" content="Compress and optimize your images online for free. Reduce image file size without losing quality. Perfect for web performance and SEO image optimization.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com">
    <meta property="og:image" content="https://yourwebsite.com/logo.png">
    <title>ImageCompressPro - Free Online Image Compressor | Optimize Images Without Losing Quality</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID" crossorigin="anonymous"></script>
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --accent-color: #4895ef;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4bb543;
            --warning-color: #f0ad4e;
            --danger-color: #d9534f;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: #f5f7ff;
            padding: 0;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: white;
            box-shadow: var(--box-shadow);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            font-size: 28px;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 500;
            transition: var(--transition);
        }

        nav ul li a:hover {
            color: var(--primary-color);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark-color);
        }

        .hero {
            text-align: center;
            padding: 60px 0 40px;
            background: linear-gradient(135deg, #4361ee 0%, #3f37c9 100%);
            color: white;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        .compression-tool {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-top: -30px;
            position: relative;
            z-index: 10;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .tool-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .upload-area {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .upload-area.active {
            border-color: var(--primary-color);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .upload-area i {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .upload-area h3 {
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .upload-area p {
            color: #666;
            margin-bottom: 20px;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .settings-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .setting-group {
            flex: 1;
            min-width: 250px;
        }

        .setting-group h4 {
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .radio-group {
            display: flex;
            gap: 15px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .radio-option input {
            margin-right: 5px;
        }

        .slider-container {
            width: 100%;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        .slider-value {
            text-align: center;
            margin-top: 10px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .preview-container {
            display: none;
            gap: 20px;
            flex-wrap: wrap;
        }

        .preview-column {
            flex: 1;
            min-width: 300px;
        }

        .preview-card {
            border: 1px solid #eee;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
        }

        .preview-card h4 {
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-image {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            display: block;
        }

        .file-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .file-info span {
            font-weight: 500;
        }

        .progress-container {
            display: none;
            margin: 20px 0;
        }

        .progress-bar {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .results {
            display: none;
            margin-top: 20px;
        }

        .result-stats {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat-item {
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .ad-container {
            margin: 30px 0;
            text-align: center;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: var(--border-radius);
        }

        .ad-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .features {
            padding: 60px 0;
            background-color: white;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title h2 {
            font-size: 2rem;
            color: var(--dark-color);
            margin-bottom: 15px;
        }

        .section-title p {
            color: #666;
            max-width: 700px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow);
        }

        .feature-card i {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        .feature-card p {
            color: #666;
        }

        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            font-size: 18px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: #ccc;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column ul li a:hover {
            color: white;
            padding-left: 5px;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #999;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 0 15px;
            }

            nav {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: white;
                box-shadow: var(--box-shadow);
                padding: 20px;
                transform: translateY(-150%);
                transition: var(--transition);
                z-index: 99;
            }

            nav.active {
                transform: translateY(0);
            }

            nav ul {
                flex-direction: column;
            }

            nav ul li {
                margin: 0 0 15px 0;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .compression-tool {
                padding: 20px;
            }

            .settings-panel {
                flex-direction: column;
            }

            .preview-column {
                min-width: 100%;
            }
        }

        /* Loading spinner */
        .spinner {
            display: none;
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--dark-color);
            color: white;
            padding: 15px 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            background-color: var(--success-color);
        }

        .toast.error {
            background-color: var(--danger-color);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="#" class="logo">
                <i class="fas fa-compress-alt"></i>
                ImageCompressPro
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <nav id="mainNav">
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#">How It Works</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Compress Images Online for Free</h1>
            <p>Reduce image file size without losing quality. Supports JPG, PNG, and WebP formats. Fast, secure, and completely free!</p>
        </div>
    </section>

    <div class="container">
        <div class="compression-tool">
            <div class="tool-container">
                <!-- Ad Container Top -->
                <div class="ad-container">
                    <div class="ad-label">Advertisement</div>
                    <!-- Replace with your AdSense ad unit -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                         data-ad-slot="YOUR_AD_SLOT_ID"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Upload Your Image</h3>
                    <p>Drag & drop your image here or click to browse files</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    <button class="btn" id="selectFileBtn">Select Image</button>
                </div>

                <div class="settings-panel" id="settingsPanel" style="display: none;">
                    <div class="setting-group">
                        <h4>Compression Level</h4>
                        <div class="slider-container">
                            <input type="range" min="0" max="100" value="70" class="slider" id="compressionSlider">
                            <div class="slider-value" id="compressionValue">70%</div>
                        </div>
                    </div>
                    <div class="setting-group">
                        <h4>Output Format</h4>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="format" value="original" checked> Original
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="format" value="jpeg"> JPEG
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="format" value="png"> PNG
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="format" value="webp"> WebP
                            </label>
                        </div>
                    </div>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress" id="progressBar"></div>
                    </div>
                    <div class="progress-text" id="progressText">Compressing image...</div>
                </div>

                <div class="preview-container" id="previewContainer">
                    <div class="preview-column">
                        <div class="preview-card">
                            <h4>Original Image</h4>
                            <img id="originalPreview" class="preview-image" src="" alt="Original Image">
                            <div class="file-info">
                                <span>Size:</span>
                                <span id="originalSize">0 KB</span>
                            </div>
                            <div class="file-info">
                                <span>Dimensions:</span>
                                <span id="originalDimensions">0 × 0</span>
                            </div>
                        </div>
                    </div>
                    <div class="preview-column">
                        <div class="preview-card">
                            <h4>Compressed Image <span id="compressionBadge" style="background-color: #4bb543; color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px;">0% smaller</span></h4>
                            <img id="compressedPreview" class="preview-image" src="" alt="Compressed Image">
                            <div class="file-info">
                                <span>Size:</span>
                                <span id="compressedSize">0 KB</span>
                            </div>
                            <div class="file-info">
                                <span>Dimensions:</span>
                                <span id="compressedDimensions">0 × 0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="results" id="results">
                    <div class="result-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="savingsPercent">0%</div>
                            <div class="stat-label">Smaller</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="savingsKb">0 KB</div>
                            <div class="stat-label">Saved</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="originalKb">0 KB</div>
                            <div class="stat-label">Original Size</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="compressedKb">0 KB</div>
                            <div class="stat-label">Compressed</div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn" id="downloadBtn">
                            <i class="fas fa-download"></i> Download
                        </button>
                        <button class="btn btn-outline" id="compressAnotherBtn">
                            <i class="fas fa-redo"></i> Compress Another
                        </button>
                    </div>
                </div>

                <!-- Ad Container Bottom -->
                <div class="ad-container">
                    <div class="ad-label">Advertisement</div>
                    <!-- Replace with your AdSense ad unit -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                         data-ad-slot="YOUR_AD_SLOT_ID"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </div>
        </div>
    </div>

    <section class="features" id="features">
        <div class="container">
            <div class="section-title">
                <h2>Why Choose Our Image Compressor?</h2>
                <p>Our tool offers the best balance between quality and file size reduction for all your image needs</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-bolt"></i>
                    <h3>Lightning Fast</h3>
                    <p>Compress images in seconds with our optimized processing algorithms that work directly in your browser.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-lock"></i>
                    <h3>Secure & Private</h3>
                    <p>Your images are processed locally in your browser and never uploaded to our servers. Complete privacy guaranteed.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-chart-line"></i>
                    <h3>High Compression</h3>
                    <p>Reduce image file size by up to 90% while maintaining visual quality with our advanced compression techniques.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>Mobile Friendly</h3>
                    <p>Works perfectly on all devices including smartphones and tablets. No app installation required.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-file-image"></i>
                    <h3>Multiple Formats</h3>
                    <p>Supports all popular image formats including JPG, PNG, and WebP with format conversion options.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-cogs"></i>
                    <h3>Advanced Settings</h3>
                    <p>Fine-tune compression with our intuitive controls to get exactly the results you want.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ImageCompressPro</h3>
                    <p>A free online tool to compress and optimize your images without sacrificing quality. Perfect for web developers, designers, and photographers.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#">How It Works</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Image Optimization Guide</a></li>
                        <li><a href="#">Web Performance Tips</a></li>
                        <li><a href="#">API Documentation</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                        <li><a href="#">GDPR Compliance</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; <span id="currentYear"></span> ImageCompressPro. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <div class="spinner" id="spinner"></div>
    <div class="toast" id="toast"></div>

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mainNav = document.getElementById('mainNav');

        mobileMenuBtn.addEventListener('click', () => {
            mainNav.classList.toggle('active');
        });

        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Image compression tool functionality
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const selectFileBtn = document.getElementById('selectFileBtn');
        const settingsPanel = document.getElementById('settingsPanel');
        const previewContainer = document.getElementById('previewContainer');
        const results = document.getElementById('results');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const spinner = document.getElementById('spinner');
        const toast = document.getElementById('toast');

        // Compression controls
        const compressionSlider = document.getElementById('compressionSlider');
        const compressionValue = document.getElementById('compressionValue');
        const formatRadios = document.querySelectorAll('input[name="format"]');

        // Preview elements
        const originalPreview = document.getElementById('originalPreview');
        const compressedPreview = document.getElementById('compressedPreview');
        const originalSize = document.getElementById('originalSize');
        const compressedSize = document.getElementById('compressedSize');
        const originalDimensions = document.getElementById('originalDimensions');
        const compressedDimensions = document.getElementById('compressedDimensions');
        const compressionBadge = document.getElementById('compressionBadge');

        // Result elements
        const savingsPercent = document.getElementById('savingsPercent');
        const savingsKb = document.getElementById('savingsKb');
        const originalKb = document.getElementById('originalKb');
        const compressedKb = document.getElementById('compressedKb');

        // Action buttons
        const downloadBtn = document.getElementById('downloadBtn');
        const compressAnotherBtn = document.getElementById('compressAnotherBtn');

        let originalFile = null;
        let compressedBlob = null;

        // Update compression value display
        compressionSlider.addEventListener('input', () => {
            compressionValue.textContent = `${compressionSlider.value}%`;
        });

        // File selection
        selectFileBtn.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelection(e.target.files[0]);
            }
        });

        // Drag and drop functionality
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('active');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('active');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('active');
            
            if (e.dataTransfer.files.length > 0) {
                handleFileSelection(e.dataTransfer.files[0]);
            }
        });

        // Handle file selection
        function handleFileSelection(file) {
            if (!file.type.match('image.*')) {
                showToast('Please select an image file (JPG, PNG, etc.)', 'error');
                return;
            }

            originalFile = file;
            settingsPanel.style.display = 'flex';
            previewContainer.style.display = 'none';
            results.style.display = 'none';

            // Display original image preview
            const reader = new FileReader();
            reader.onload = (e) => {
                originalPreview.src = e.target.result;
                
                // Get image dimensions
                const img = new Image();
                img.onload = function() {
                    originalDimensions.textContent = `${this.width} × ${this.height}`;
                    
                    // Show preview after image is loaded
                    previewContainer.style.display = 'flex';
                    
                    // Start compression process
                    compressImage(originalFile);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);

            // Update original file size
            originalSize.textContent = formatFileSize(file.size);
            originalKb.textContent = formatFileSize(file.size);
        }

        // Compress image
        function compressImage(file) {
            progressContainer.style.display = 'block';
            spinner.style.display = 'block';
            progressBar.style.width = '0%';
            progressText.textContent = 'Compressing image...';

            // Simulate progress (in a real app, this would be actual compression progress)
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 5;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    processCompressionComplete(file);
                }
            }, 100);
        }

        // Process compression complete
        function processCompressionComplete(file) {
            spinner.style.display = 'none';
            progressText.textContent = 'Compression complete!';
            
            // In a real implementation, you would actually compress the image here
            // For this demo, we'll just use the original image and simulate compression
            
            // Get selected format
            let selectedFormat = 'original';
            formatRadios.forEach(radio => {
                if (radio.checked) {
                    selectedFormat = radio.value;
                }
            });
            
            // Get compression level (0-100)
            const compressionLevel = parseInt(compressionSlider.value) / 100;
            
            // Simulate compression by reducing quality
            setTimeout(() => {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Maintain original dimensions
                    canvas.width = this.width;
                    canvas.height = this.height;
                    ctx.drawImage(this, 0, 0);
                    
                    // Determine output format
                    let mimeType = file.type;
                    if (selectedFormat !== 'original') {
                        if (selectedFormat === 'jpeg') mimeType = 'image/jpeg';
                        if (selectedFormat === 'png') mimeType = 'image/png';
                        if (selectedFormat === 'webp') mimeType = 'image/webp';
                    }
                    
                    // Convert to data URL with quality
                    let quality = 1 - compressionLevel;
                    if (quality < 0.1) quality = 0.1; // Minimum quality
                    
                    canvas.toBlob((blob) => {
                        compressedBlob = blob;
                        
                        // Display compressed preview
                        compressedPreview.src = URL.createObjectURL(blob);
                        compressedDimensions.textContent = `${this.width} × ${this.height}`;
                        
                        // Update file size info
                        const originalSizeBytes = file.size;
                        const compressedSizeBytes = blob.size;
                        const savings = originalSizeBytes - compressedSizeBytes;
                        const savingsPercentage = (savings / originalSizeBytes * 100).toFixed(1);
                        
                        compressedSize.textContent = formatFileSize(compressedSizeBytes);
                        compressedKb.textContent = formatFileSize(compressedSizeBytes);
                        savingsPercent.textContent = `${savingsPercentage}%`;
                        savingsKb.textContent = formatFileSize(savings);
                        compressionBadge.textContent = `${savingsPercentage}% smaller`;
                        
                        // Show results
                        results.style.display = 'block';
                        showToast('Image compressed successfully!', 'success');
                        
                    }, mimeType, quality);
                };
                img.src = URL.createObjectURL(file);
            }, 500);
        }

        // Download compressed image
        downloadBtn.addEventListener('click', () => {
            if (!compressedBlob) return;
            
            const a = document.createElement('a');
            const url = URL.createObjectURL(compressedBlob);
            
            // Determine file extension based on selected format
            let extension = 'jpg';
            formatRadios.forEach(radio => {
                if (radio.checked) {
                    if (radio.value === 'png') extension = 'png';
                    if (radio.value === 'webp') extension = 'webp';
                    if (radio.value === 'original') {
                        // Get extension from original file name
                        const originalName = originalFile.name;
                        const lastDot = originalName.lastIndexOf('.');
                        if (lastDot > 0) {
                            extension = originalName.substring(lastDot + 1);
                        }
                    }
                }
            });
            
            a.href = url;
            a.download = `compressed-image.${extension}`;
            document.body.appendChild(a);
            a.click();
            
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 0);
        });

        // Compress another image
        compressAnotherBtn.addEventListener('click', () => {
            // Reset the tool
            fileInput.value = '';
            originalFile = null;
            compressedBlob = null;
            settingsPanel.style.display = 'none';
            previewContainer.style.display = 'none';
            results.style.display = 'none';
            progressContainer.style.display = 'none';
            originalPreview.src = '';
            compressedPreview.src = '';
        });

        // Helper function to format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Show toast notification
        function showToast(message, type = '') {
            toast.textContent = message;
            toast.className = 'toast';
            toast.classList.add(type);
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initialize AdSense (replace with your actual AdSense code)
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>
